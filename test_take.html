<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>양도세 계산기</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <h2>6개월 이내 양도시</h2>
    <label for="transferPrice1">양도가액:</label>
    <input type="text" id="transferPrice1" inputmode="numeric" oninput="formatNumber(this)"><br>
    <label for="acquisitionPrice1">취득가액 (양도가액과 동일):</label>
    <input type="text" id="acquisitionPrice1" readonly><br>
    <label for="holdingPeriod1">보유기간(년): 6개월 이내</label>
    <input type="number" id="holdingPeriod1" value="0.5" readonly><br><br>
    <button onclick="calculateTaxes(1)">계산하기</button>
    <div id="resultTable1" style="display:none;">
        <h3>계산 결과</h3>
        <table border="1">
            <tr>
                <th>구분</th>
                <th>금액</th>
                <th>비고</th>
            </tr>
            <tr>
                <td>1) 양도가액</td>
                <td style="text-align: right;" id="transferValue1"></td>
                <td style="text-align: center;"></td>
            </tr>
            <tr>
                <td>2) 취득가액</td>
                <td style="text-align: right;" id="acquisitionValue1"></td>
                <td style="text-align: center;"></td>
            </tr>
            <tr>
                <td>3) 양도차익</td>
                <td style="text-align: right;" id="capitalGain1"></td>
                <td style="text-align: center;">1) - 2)</td>
            </tr>
            <tr>
                <td>4) 장기보유특별공제</td>
                <td style="text-align: right;" id="longTermDeduction1"></td>
                <td style="text-align: center;">해당 없음</td>
            </tr>
            <tr>
                <td>5) 양도소득금액</td>
                <td style="text-align: right;" id="taxableIncome1"></td>
                <td style="text-align: center;">3) - 4)</td>
            </tr>
            <tr>
                <td>6) 기본공제</td>
                <td style="text-align: right;">해당 없음</td>
                <td style="text-align: center;"></td>
            </tr>
            <tr>
                <td>7) 과세표준</td>
                <td style="text-align: right;" id="taxBase1"></td>
                <td style="text-align: center;"></td>
            </tr>
            <tr>
                <td>8) 양도세율</td>
                <td style="text-align: right;">해당 없음</td>
                <td style="text-align: center;"></td>
            </tr>
            <tr>
                <td>9) 양도세</td>
                <td style="text-align: right;" id="transferTax1"></td>
                <td style="text-align: center;"></td>
            </tr>
            <tr>
                <td>10) 지방소득세</td>
                <td style="text-align: right;" id="localIncomeTax1"></td>
                <td style="text-align: center;">양도세 * 10%</td>
            </tr>
            <tr>
                <td>11) 세액합계</td>
                <td style="text-align: right;" id="totalTax1"></td>
                <td style="text-align: center;"></td>
            </tr>
        </table>
    </div>

<h2>시가 신고후 미래 양도시</h2>
<label for="transferPrice2">양도가액:</label>
<input type="text" id="transferPrice2" inputmode="numeric" oninput="formatNumber(this)"><br>
<label for="acquisitionPrice2">취득가액:</label>
<input type="text" id="acquisitionPrice2" inputmode="numeric" oninput="formatNumber(this)"><br>
<label for="holdingPeriod2">보유기간(년): 사망일로부터 양도일까지</label>
<input type="number" id="holdingPeriod2"><br><br>
<button onclick="calculateTaxes2()">계산하기</button>
<div id="resultTable2" style="display:none;">
    <h3>계산 결과</h3>
    <table border="1">
        <tr>
            <th>구분</th>
            <th>금액</th>
            <th>비고</th>
        </tr>
        <tr>
            <td>1) 양도가액</td>
            <td style="text-align: right;" id="transferValue2"></td>
            <td style="text-align: center;"></td>
        </tr>
        <tr>
            <td>2) 취득가액</td>
            <td style="text-align: right;" id="acquisitionValue2"></td>
            <td style="text-align: center;"></td>
        </tr>
        <tr>
            <td>3) 양도차익</td>
            <td style="text-align: right;" id="capitalGain2"></td>
            <td style="text-align: center;">1) - 2)</td>
        </tr>
        <tr>
            <td>4) 장기보유특별공제</td>
            <td style="text-align: right;" id="longTermDeduction2"></td>
            <td style="text-align: center;">해당 없음</td>
        </tr>
        <tr>
            <td>5) 양도소득금액</td>
            <td style="text-align: right;" id="taxableIncome2"></td>
            <td style="text-align: center;">3) - 4)</td>
        </tr>
        <tr>
            <td>6) 기본공제</td>
            <td style="text-align: right;">해당 없음</td>
            <td style="text-align: center;"></td>
        </tr>
        <tr>
            <td>7) 과세표준</td>
            <td style="text-align: right;" id="taxBase2"></td>
            <td style="text-align: center;"></td>
        </tr>
        <tr>
            <td>8) 양도세율</td>
            <td style="text-align: right;">해당 없음</td>
            <td style="text-align: center;"></td>
        </tr>
        <tr>
            <td>9) 양도세</td>
            <td style="text-align: right;" id="transferTax2"></td>
            <td style="text-align: center;"></td>
        </tr>
        <tr>
            <td>10) 지방소득세</td>
            <td style="text-align: right;" id="localIncomeTax2"></td>
            <td style="text-align: center;">양도세 * 10%</td>
        </tr>
        <tr>
            <td>11) 세액합계</td>
            <td style="text-align: right;" id="totalTax2"></td>
            <td style="text-align: center;"></td>
        </tr>
    </table>
</div>

<h2>기준시가 신고후 미래 양도시</h2>
<label for="transferPrice3">양도가액:</label>
<input type="text" id="transferPrice3" inputmode="numeric" oninput="formatNumber(this)"><br>
<label for="acquisitionPrice3">취득가액:</label>
<input type="text" id="acquisitionPrice3" inputmode="numeric" oninput="formatNumber(this)"><br>
<label for="holdingPeriod3">보유기간(년): 사망일로부터 양도일까지</label>
<input type="number" id="holdingPeriod3"><br><br>
<button onclick="calculateTaxes3()">계산하기</button>
<div id="resultTable3" style="display:none;">
    <h3>계산 결과</h3>
    <table border="1">
        <tr>
            <th>구분</th>
            <th>금액</th>
            <th>비고</th>
        </tr>
        <tr>
            <td>1) 양도가액</td>
            <td style="text-align: right;" id="transferValue3"></td>
            <td style="text-align: center;"></td>
        </tr>
        <tr>
            <td>2) 취득가액</td>
            <td style="text-align: right;" id="acquisitionValue3"></td>
            <td style="text-align: center;"></td>
        </tr>
        <tr>
            <td>3) 양도차익</td>
            <td style="text-align: right;" id="capitalGain3"></td>
            <td style="text-align: center;">1) - 2)</td>
        </tr>
        <tr>
            <td>4) 장기보유특별공제</td>
            <td style="text-align: right;" id="longTermDeduction3"></td>
            <td style="text-align: center;">해당 없음</td>
        </tr>
        <tr>
            <td>5) 양도소득금액</td>
            <td style="text-align: right;" id="taxableIncome3"></td>
            <td style="text-align: center;">3) - 4)</td>
        </tr>
        <tr>
            <td>6) 기본공제</td>
            <td style="text-align: right;">해당 없음</td>
            <td style="text-align: center;"></td>
        </tr>
        <tr>
            <td>7) 과세표준</td>
            <td style="text-align: right;" id="taxBase3"></td>
            <td style="text-align: center;"></td>
        </tr>
        <tr>
            <td>8) 양도세율</td>
            <td style="text-align: right;">해당 없음</td>
            <td style="text-align: center;"></td>
        </tr>
        <tr>
            <td>9) 양도세</td>
            <td style="text-align: right;" id="transferTax3"></td>
            <td style="text-align: center;"></td>
        </tr>
        <tr>
            <td>10) 지방소득세</td>
            <td style="text-align: right;" id="localIncomeTax3"></td>
            <td style="text-align: center;">양도세 * 10%</td>
        </tr>
        <tr>
            <td>11) 세액합계</td>
            <td style="text-align: right;" id="totalTax3"></td>
            <td style="text-align: center;"></td>
        </tr>
    </table>
</div>

<script>
    function formatNumber(input) {
        let numericValue = input.value.replace(/,/g, '').replace(/\D/g, '');
        input.value = numericValue.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    function calculateTaxes1() {
        let transferPrice = parseFloat(document.getElementById('transferPrice1').value.replace(/,/g, ''));
        let acquisitionPrice = transferPrice;
        let holdingPeriod = 0.5;

        document.getElementById('acquisitionPrice1').value = transferPrice.toLocaleString();

        let capitalGain = 0;
        let longTermDeduction = 0;
        let taxableIncome = 0;
        let taxBase = 0;
        let transferTax = 0;
        let localIncomeTax = 0;
        let totalTax = 0;

        document.getElementById('transferValue1').innerText = transferPrice.toLocaleString();
        document.getElementById('acquisitionValue1').innerText = acquisitionPrice.toLocaleString();
        document.getElementById('capitalGain1').innerText = capitalGain.toLocaleString();
        document.getElementById('longTermDeduction1').innerText = longTermDeduction.toLocaleString();
        document.getElementById('taxableIncome1').innerText = taxableIncome.toLocaleString();
        document.getElementById('taxBase1').innerText = taxBase.toLocaleString();
        document.getElementById('transferTax1').innerText = transferTax.toLocaleString();
        document.getElementById('localIncomeTax1').innerText = localIncomeTax.toLocaleString();
        document.getElementById('totalTax1').innerText = totalTax.toLocaleString();

        document.getElementById('resultTable1').style.display = 'block';
    }

    function calculateTaxes2() {
        let transferPrice = parseFloat(document.getElementById('transferPrice2').value.replace(/,/g, ''));
        let acquisitionPrice = parseFloat(document.getElementById('acquisitionPrice2').value.replace(/,/g, ''));
        let holdingPeriod = parseFloat(document.getElementById('holdingPeriod2').value);

        let capitalGain = transferPrice - acquisitionPrice;
        let longTermDeduction = calculateLongTermDeduction(capitalGain, holdingPeriod);
        let taxableIncome = capitalGain - longTermDeduction;
        let taxBase = Math.max(0, taxableIncome - 2500000);
        let transferTax = calculateTransferTax(taxBase);
        let localIncomeTax = transferTax * 0.1;
        let totalTax = transferTax + localIncomeTax;

        document.getElementById('transferValue2').innerText = transferPrice.toLocaleString();
        document.getElementById('acquisitionValue2').innerText = acquisitionPrice.toLocaleString();
        document.getElementById('capitalGain2').innerText = capitalGain.toLocaleString();
        document.getElementById('longTermDeduction2').innerText = longTermDeduction.toLocaleString();
        document.getElementById('taxableIncome2').innerText = taxableIncome.toLocaleString();
        document.getElementById('taxBase2').innerText = taxBase.toLocaleString();
        document.getElementById('transferTax2').innerText = transferTax.toLocaleString();
        document.getElementById('localIncomeTax2').innerText = localIncomeTax.toLocaleString();
        document.getElementById('totalTax2').innerText = totalTax.toLocaleString();

        document.getElementById('resultTable2').style.display = 'block';
    }

    function calculateTaxes3() {
        let transferPrice = parseFloat(document.getElementById('transferPrice3').value.replace(/,/g, ''));
        let acquisitionPrice = parseFloat(document.getElementById('acquisitionPrice3').value.replace(/,/g, ''));
        let holdingPeriod = parseFloat(document.getElementById('holdingPeriod3').value);

        let capitalGain = transferPrice - acquisitionPrice;
        let longTermDeduction = calculateLongTermDeduction(capitalGain, holdingPeriod);
        let taxableIncome = capitalGain - longTermDeduction;
        let taxBase = Math.max(0, taxableIncome - 2500000);
        let transferTax = calculateTransferTax(taxBase);
        let localIncomeTax = transferTax * 0.1;
        let totalTax = transferTax + localIncomeTax;

        document.getElementById('transferValue3').innerText = transferPrice.toLocaleString();
        document.getElementById('acquisitionValue3').innerText = acquisitionPrice.toLocaleString();
        document.getElementById('capitalGain3').innerText = capitalGain.toLocaleString();
        document.getElementById('longTermDeduction3').innerText = longTermDeduction.toLocaleString();
        document.getElementById('taxableIncome3').innerText = taxableIncome.toLocaleString();
        document.getElementById('taxBase3').innerText = taxBase.toLocaleString();
        document.getElementById('transferTax3').innerText = transferTax.toLocaleString();
        document.getElementById('localIncomeTax3').innerText = localIncomeTax.toLocaleString();
        document.getElementById('totalTax3').innerText = totalTax.toLocaleString();

        document.getElementById('resultTable3').style.display = 'block';
    }

    function calculateLongTermDeduction(capitalGain, holdingPeriod) {
        let deductionRate = 0;
        if (holdingPeriod >= 3 && holdingPeriod < 4) {
            deductionRate = 0.06;
        } else if (holdingPeriod >= 4 && holdingPeriod < 5) {
            deductionRate = 0.08;
        } else if (holdingPeriod >= 5) {
            deductionRate = Math.min(0.3, 0.02 * holdingPeriod);
        }
        return capitalGain * deductionRate;
    }

    function calculateTransferTax(taxBase) {
        if (taxBase <= 14000000) {
            return taxBase * 0.06; // 6%
        } else if (taxBase <= 50000000) {
            return taxBase * 0.15 - 1260000; // 15%, 1260000원 공제
        } else if (taxBase <= 88000000) {
            return taxBase * 0.24 - 5760000; // 24%, 5760000원 공제
        } else if (taxBase <= 150000000) {
            return taxBase * 0.35 - 15440000; // 35%, 15440000원 공제
        } else if (taxBase <= 300000000) {
            return taxBase * 0.38 - 19940000; // 38%, 19940000원 공제
        } else if (taxBase <= 500000000) {
            return taxBase * 0.40 - 25940000; // 40%, 25940000원 공제
        } else if (taxBase <= 1000000000) {
            return taxBase * 0.42 - 35940000; // 42%, 35940000원 공제
        } else {
            return taxBase * 0.45 - 65940000; // 45%, 65940000원 공제
        }
    }
</script>
</body>
</html>